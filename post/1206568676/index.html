<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Core"><title>MySQL 基础 · 张小剩的博客</title><meta name="description" content="数据库基本操作
关系型数据库： 以二维表存储数据

数据表操作
数据表的创建

-- unsigned: 无符号
-- primary key： 主键
-- auto_increment： 自动递增

create table demo (
    id int unsigned primary k"><meta name="keywords" content="极限博客,极限Blog,博客,极限"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="stylesheet" href="/alwaysblog/css/style.css"><link rel="stylesheet" href="/alwaysblog/css/blog_basic.css"><link rel="stylesheet" href="/alwaysblog/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/alwaysblog/js/jquery.js"></script><meta name="generator" content="Hexo 5.4.1"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/alwaysblog/images/logo@2x.png" style="width:127px"><h3><a href="/">张小剩的博客</a></h3><div class="description"><p>心之所愿，无事不成。<br>Nothing is impossible to a willing heart.</p></div></div></div><ul class="social-links"><li><a href="https://github.com/mrcore"><i class="fa fa-github"></i></a></li><li><a href="mailto:x@jixian.io"><i class="fa fa-envelope"></i></a></li><li><a target="_blank" rel="noopener" href="http://sighttp.qq.com/authd?IDKEY="><i class="fa fa-qq"></i></a></li><li><a target="_blank" rel="noopener" href="https://zhihu.com/people/"><i class="fa fa-mortar-board"></i></a></li></ul><div class="footer"><div class="p"><span>© 2017 - 2020 </span><i class="fa fa-star"></i><span> Core</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/zh-cn/" target="_blank">Hexo </a><span>& </span><a href="https://github.com/mrcore/hexo-theme-Anatole-Core" target="_blank">Anatole-Core</a></div><div class="beian"><a href="http://www.beian.miit.gov.cn/" target="_blank">粤ICP备15011643号</a><span style="height:10px;margin-left:10px">|</span><img src="/alwaysblog/images/gongan.png" style="height:10px;margin-left:10px;position:relative;top:1px"><span style="margin-left:2px">粤公网安备 44030402003967号</span></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li><li><a href="/tags">标签</a></li><li><a href="/about">关于</a></li><li><a href="/guestbook">留言</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"></a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>MySQL 基础</a></h3></div><div class="post-content"><h2 id="数据库基本操作"><a href="#数据库基本操作" class="headerlink" title="数据库基本操作"></a>数据库基本操作</h2><blockquote><p>关系型数据库： 以二维表存储数据</p></blockquote><h3 id="数据表操作"><a href="#数据表操作" class="headerlink" title="数据表操作"></a>数据表操作</h3><ul><li>数据表的创建</li></ul><pre><code class="sql">-- unsigned: 无符号
-- primary key： 主键
-- auto_increment： 自动递增

create table demo (
    id int unsigned primary key auto_increment,
    name varchar(10),
    age int unsigned
)
</code></pre><ul><li>数据表的删除</li></ul><pre><code class="sql">
-- 删除掉 demo 表
drop table demo;

-- 如果数据库中存在demo表，就把它从数据库中drop掉。
drop table if exists demo;

-- 使用场景
drop table if exists demo;
create table demo (
    id int unsigned primary key auto_increment,
    name varchar(10),
    age int unsigned
)
</code></pre><h3 id="数据操作"><a href="#数据操作" class="headerlink" title="数据操作"></a>数据操作</h3><ul><li>增<br>```sql</li><li><ul><li>单条添加<br>insert into demo values(null, “鲁班”, 20);</li></ul></li></ul><p>– 多条添加<br>insert into demo(name, age) values(“鲁班大师”, 50),(“凯”, 32),(“安琪拉”, 20), … …</p><pre><code>- 删
```sql
-- 删除表中所有数据
delete from demo;

-- 按条件删除数据
delete from demo where name =&quot;鲁班大师&quot;;  ==&gt; 删除 name 是 鲁班大师的整条数据
</code></pre><ul><li>改<br>```sql<br>update demo set name = “小乔”, age = 20 where id = 10;</li></ul><pre><code>- 查
```sql

select * from demo;
select name, age from demo;

-- 条件查询
select name from demo where id = 1;

-- where 支持多种运算符
   - 比较运算符： =, &gt;, &lt;, &gt;=, &lt;=, !=
   - 逻辑运算符： and(且), or(或), not(非)
   - 模糊查询： like ==&gt; %, _ 
     + where name like &#39;孙%&#39;
     + where name like &#39;孙_&#39;
     + where name like &#39;%孙%&#39;
     + where name like &#39;_ _&#39;
   - 范围查询 in(&#39;男&#39;, 女), between 18 and 20
   - 空判断： null , isnull


-- 设置别名
select name as 姓名, age as 年龄 from demo;

-- 数据表设置别名
select D.name, D.age from demo as D;
</code></pre><ul><li>去掉字段中重复的数据<br>```sql<br>select distinct sex from student;</li></ul><p>– 去掉多个字段中重复的数据<br>select distinct sex, class from student;</p><pre><code>- 排序
```sql
select * from student order by age;
-- 升序： order by age asc (默认)
-- 降序： order by age desc

-- 多次排序
select * from student order by age,id desc 先年龄正序，id降序

-- 中文排序
select * from student order by convert(name using gbk)
</code></pre><h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><ul><li><p>count 统计</p><pre><code class="sql">select count(*) from student;  ==&gt; 只要有值就统计
     count(name)
</code></pre></li><li><p>max 最大值</p><pre><code class="sql">select max(age) from student;  
</code></pre></li><li><p>min 最小值</p><pre><code class="sql">select min(age) from student;  
</code></pre></li><li><p>sum 求和</p><pre><code class="sql">select sum(age) from student;  
</code></pre></li><li><p>avg 平均值</p><pre><code class="sql">select avg(age) from student;  
</code></pre><h3 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h3></li><li><p>group by 根据某一字段排序，可以去重<br>```sql</p></li><li><ul><li>每个班级的平均，最大年龄<br>select class, avg(age), max(age) from student group by class;<br>```<h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3></li></ul></li><li><p>等值查询</p><pre><code class="sql">select * from student as stu, score as sc where stu.sid = sc.sid;
</code></pre></li><li><p>内查询</p><pre><code class="sql">select * from student as stu
inner join score as sc on stu.sid = sc.sid;
</code></pre></li><li><p>多表连接(两两之间产生条件)</p><pre><code class="sql">select * from student as stu
inner join score as sc on stu.sid = sc.sid
inner join course as co on sc.cid = co.cid;
</code></pre></li><li><p>自关联（同一个表查询多次，自己产生关联，表必须起别名）</p><pre><code class="sql">select * from areas as sheng
inner join areas as shi on sheng.pid = shi.pid
</code></pre></li><li><p>左连接（jion 前边的表）</p><pre><code class="sql">select * from student as stu
left join score as sc on stu.sid = sc.sid;
</code></pre></li><li><p>右连接</p><pre><code class="sql">select * from student as stu
right join score as sc on stu.sid = sc.sid;
</code></pre></li><li><p>子查询<br>```sql</p></li><li><ul><li>查询大于平均年龄的学生<br>select * from student whrer age &gt; (select avg(age) from student);<br>```</li></ul></li><li><p>数据分表<br>```sql<br>create table newStudent (<br>id int unsigned primary key auto_increment,<br>name varchar(10),<br>age int unsigned<br>)</p></li><li><ul><li>查询的数据插入到另一个表中（查询出来的列必须对应表中的字段名，否则会新建）<br>insert into newStudent(id, name, age ) select id,name,age from student;</li></ul></li></ul><p>– 创建并直接插入（查询出来的列必须对应表中的字段名，否则会新建）<br>create table newStudent (<br>id int unsigned primary key auto_increment,<br>Sname varchar(10)<br>) select name as Sname from student;</p><pre><code>### 索引（作用于某个字段）

**加索引后会使写入、修改、删除变慢，每一次增加数据平衡树都会重新排列，也会增加表的体积，占用磁盘存储空间。**
- 查看索引
```sql
    show index from 表名;
</code></pre><ul><li>创建索引（创建索引后，表在磁盘上的存储结构就由整齐排列的结构转变成了树状结构，也就是「平衡树」结构）<br>```sql</li><li><ul><li>建表时创建索引 key (age)、primary key、unique<br>create table newStudent (<br>id int unsigned primary key auto_increment,<br>name varchar(10) unique<br>age int unsigned,<br>key (age)<br>)</li></ul></li></ul><p>– 已经存在的表创建索引<br>create index 索引名称 on 表名(字段名(长度))<br>create index i_index on newStudent(name(10))</p><p>```</p></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2020-08-02</span><i class="fa fa-tag"></i><a class="tag" href="/alwaysblog/categories/后端领域/" title="后端领域">后端领域 </a><a class="tag" href="/alwaysblog/categories/后端领域/数据库/" title="数据库">数据库 </a><a class="tag" href="/alwaysblog/categories/后端领域/数据库/MySQL/" title="MySQL">MySQL </a><a class="tag" href="/alwaysblog/tags/mysql/" title="mysql">mysql </a><span class="leancloud_visitors"></span></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="" onclick="join_favorite()" ref="sidebar"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://github.com/alwayscn/alwaysblog/post/1206568676/,张小剩的博客,MySQL 基础,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/alwaysblog/post/4225305543/" title="MySQL 经典面试题">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/alwaysblog/post/2030954057/" title="adb 常用命令">下一篇</a></li></ul></div><script src="/alwaysblog/js/visitors.js"></script><a id="comments"></a><div id="vcomments" style="margin:0 30px"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/gh/xcss/valine@latest/dist/Valine.min.js"></script><script>var valine=new Valine({el:"#vcomments",notify:!1,verify:!1,app_id:"",app_key:"",placeholder:"念念不忘，必有回响...",path:window.location.pathname,serverURLs:"",visitor:!0,recordIP:!0,avatar:"mp"})</script></div></div></div></div><script src="/alwaysblog/js/jquery-migrate-1.2.1.min.js"></script><script src="/alwaysblog/js/jquery.appear.js"></script><script src="/alwaysblog/js/add-bookmark.js"></script><script src="/alwaysblog/js/baidu-tongji.js"></script></body></html>